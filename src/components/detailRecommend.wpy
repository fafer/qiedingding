<style lang="less">
  .info {
    position: relative;
    font-weight: normal;
    .info-hd {
      font-size: 32rpx;
      color: #333333;
      line-height: 84rpx;
      padding-left: 30rpx;
      position: relative;
      &:after {
        content: '';
        position: absolute;
        height: 1px;
        left: 0;
        bottom: 0;
        right: 0;
        background-color: #f3f3f3;
        transform: scaleY(.5);
        transform-origin-y: bottom;
      }
    }
    .info-content {
      .info-item {
        position: relative;
        padding: 11rpx 30rpx 22rpx 30rpx;
        &:before {
          content: '';
          position: absolute;
          height: 1px;
          left: 0;
          bottom: 0;
          right: 0;
          background-color: #f3f3f3;
          transform: scaleY(.5);
          transform-origin-y: top;
        }
        &:first-child {
          &:before {
            content: none;
          }
        }
        .desc {
          color: #000000;
          font-size: 30rpx;
          line-height: 49rpx;
          overflow: hidden;
          display: -webkit-box;
          word-break: break-all;
          text-overflow: ellipsis;
          -webkit-box-orient: vertical;
          -webkit-box-pack: center;
          -moz-box-pack: center;
          -webkit-line-clamp:2;
          position: relative;
          margin-bottom: 19rpx;
          &.totop:before {
            content: '荐';
            background-color: #f44657;
            color: #ffffff;
            border-radius: 6rpx;
            padding: 0 7rpx;
          }
        }
        .tip {
          color: #999999;
          font-size: 22rpx;
          line-height: 22rpx;
          .time {
            margin-right: 15rpx;
          }
        }
        .pics {
          margin-top: 38rpx;
          margin-bottom: 12rpx;
          display: flex;
          .img-wrap {
            display: inline-block;
            width: 218rpx;
            height: 150rpx;
            margin-right: 18rpx;
            overflow: hidden;
            position: relative;
            &:last-child {
              margin-right: 0;
            }
          }
          image {
            height: auto;
            width: 100%;
            position: relative;
          }
        }
      }
    }
  }
  /* 下拉进度loading */
  .more-info {
    line-height: 90rpx;
    cursor: pointer;
    position: relative;
    color: #ff552e;
    font-size: 28rpx;
    padding: 0 30rpx;
    text-align: center;
    display: block;
    &:before {
      content: '查看更多';
    }
    &.no-data:before {
      color: #999999;
      cursor: default;
      content: '以上是全部信息';
    }
    &.loading:before {
      content: ' ';
      width: 50rpx;
      height: 50rpx;
      margin-top: -.6rpx;
      vertical-align: middle;
      display: inline-block;
      animation: weuiLoading 1s steps(12, end) infinite;
      background: transparent url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAiIGhlaWdodD0iMTIwIiB2aWV3Qm94PSIwIDAgMTAwIDEwMCI+PHBhdGggZmlsbD0ibm9uZSIgZD0iTTAgMGgxMDB2MTAwSDB6Ii8+PHJlY3Qgd2lkdGg9IjciIGhlaWdodD0iMjAiIHg9IjQ2LjUiIHk9IjQwIiBmaWxsPSIjRTlFOUU5IiByeD0iNSIgcnk9IjUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAgLTMwKSIvPjxyZWN0IHdpZHRoPSI3IiBoZWlnaHQ9IjIwIiB4PSI0Ni41IiB5PSI0MCIgZmlsbD0iIzk4OTY5NyIgcng9IjUiIHJ5PSI1IiB0cmFuc2Zvcm09InJvdGF0ZSgzMCAxMDUuOTggNjUpIi8+PHJlY3Qgd2lkdGg9IjciIGhlaWdodD0iMjAiIHg9IjQ2LjUiIHk9IjQwIiBmaWxsPSIjOUI5OTlBIiByeD0iNSIgcnk9IjUiIHRyYW5zZm9ybT0icm90YXRlKDYwIDc1Ljk4IDY1KSIvPjxyZWN0IHdpZHRoPSI3IiBoZWlnaHQ9IjIwIiB4PSI0Ni41IiB5PSI0MCIgZmlsbD0iI0EzQTFBMiIgcng9IjUiIHJ5PSI1IiB0cmFuc2Zvcm09InJvdGF0ZSg5MCA2NSA2NSkiLz48cmVjdCB3aWR0aD0iNyIgaGVpZ2h0PSIyMCIgeD0iNDYuNSIgeT0iNDAiIGZpbGw9IiNBQkE5QUEiIHJ4PSI1IiByeT0iNSIgdHJhbnNmb3JtPSJyb3RhdGUoMTIwIDU4LjY2IDY1KSIvPjxyZWN0IHdpZHRoPSI3IiBoZWlnaHQ9IjIwIiB4PSI0Ni41IiB5PSI0MCIgZmlsbD0iI0IyQjJCMiIgcng9IjUiIHJ5PSI1IiB0cmFuc2Zvcm09InJvdGF0ZSgxNTAgNTQuMDIgNjUpIi8+PHJlY3Qgd2lkdGg9IjciIGhlaWdodD0iMjAiIHg9IjQ2LjUiIHk9IjQwIiBmaWxsPSIjQkFCOEI5IiByeD0iNSIgcnk9IjUiIHRyYW5zZm9ybT0icm90YXRlKDE4MCA1MCA2NSkiLz48cmVjdCB3aWR0aD0iNyIgaGVpZ2h0PSIyMCIgeD0iNDYuNSIgeT0iNDAiIGZpbGw9IiNDMkMwQzEiIHJ4PSI1IiByeT0iNSIgdHJhbnNmb3JtPSJyb3RhdGUoLTE1MCA0NS45OCA2NSkiLz48cmVjdCB3aWR0aD0iNyIgaGVpZ2h0PSIyMCIgeD0iNDYuNSIgeT0iNDAiIGZpbGw9IiNDQkNCQ0IiIHJ4PSI1IiByeT0iNSIgdHJhbnNmb3JtPSJyb3RhdGUoLTEyMCA0MS4zNCA2NSkiLz48cmVjdCB3aWR0aD0iNyIgaGVpZ2h0PSIyMCIgeD0iNDYuNSIgeT0iNDAiIGZpbGw9IiNEMkQyRDIiIHJ4PSI1IiByeT0iNSIgdHJhbnNmb3JtPSJyb3RhdGUoLTkwIDM1IDY1KSIvPjxyZWN0IHdpZHRoPSI3IiBoZWlnaHQ9IjIwIiB4PSI0Ni41IiB5PSI0MCIgZmlsbD0iI0RBREFEQSIgcng9IjUiIHJ5PSI1IiB0cmFuc2Zvcm09InJvdGF0ZSgtNjAgMjQuMDIgNjUpIi8+PHJlY3Qgd2lkdGg9IjciIGhlaWdodD0iMjAiIHg9IjQ2LjUiIHk9IjQwIiBmaWxsPSIjRTJFMkUyIiByeD0iNSIgcnk9IjUiIHRyYW5zZm9ybT0icm90YXRlKC0zMCAtNS45OCA2NSkiLz48L3N2Zz4=) no-repeat;
      background-size: 50rpx auto;
    }
    &.loading::after {
      color: #999999;
      content: '加载中...';
    }
    &.error::before {
      color: #999999;
      content: '网络失败,点击重试';
    }
  }
  /* 下拉进度loading end*/
  .img-wrap img {
    width: 100%;
  }
  /*loading annimate*/
  @keyframes weuiLoading {
    0% {
      transform: rotate3d(0, 0, 1, 0deg);
    }
    100% {
      transform: rotate3d(0, 0, 1, 360deg);
    }
  }
  /*loading annimate end*/
</style>

<template>
  <view class="info">
    <view class="info-hd">{{city}}{{cate.name}}信息</view>
    <view class="info-content">
      <repeat for="{{infos}}" key="index" index="index" item="item">
        <view class="info-item">
          <navigator url="{{item.url}}">
            <view class="desc {{item.istop?'totop':''}}">
              <text>【{{cate.name}}】{{item.desc}}</text>
            </view>
            <view class="tip">
              <text class="time">{{item.time}}</text>
              <text>{{item.city}}</text>
            </view>
            <view class="pics" wx:if="{{item.imgs.length}}">
              <repeat for="{{item.imgs}}" key="picIndex" index="picIndex" item="picItem">
                <view class="img-wrap">
                  <image mode="widthFix" src="{{picItem}}"></image>
                </view>
              </repeat>
            </view>
          </navigator>
        </view>
      </repeat>
    </view>
    <view class="more-info no-data"></view>
  </view>
</template>

<script>
  import wepy from 'wepy'
  export default class DetailRecommend extends wepy.component {
    props = {
      infos: {
        type: Object,
        default: []
      },
      city: String,
      cate: Object
    }
    methods = {
      tap() {
        this.title = 'hello'
        console.log(this.context)
      }
    }
  }
</script>
